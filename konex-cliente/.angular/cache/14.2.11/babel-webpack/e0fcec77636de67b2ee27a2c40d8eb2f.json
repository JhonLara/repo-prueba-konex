{"ast":null,"code":"import _classCallCheck from \"C:/Repo prueba KONEX/repo-prueba-konex/konex-cliente/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"C:/Repo prueba KONEX/repo-prueba-konex/konex-cliente/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport swal from \"sweetalert2\";\nimport { TranslateService } from '@ngx-translate/core';\nimport { Router } from '@angular/router';\nimport { RestService } from 'src/app/core/services/rest.service';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/core/services/rest.service\";\nimport * as i2 from \"@ngx-translate/core\";\nimport * as i3 from \"@angular/router\";\n\nfunction UrgenciasComponent_tr_35_Template(rf, ctx) {\n  if (rf & 1) {\n    var _r3 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"tr\")(1, \"td\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"td\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"td\");\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"td\");\n    i0.ɵɵtext(8);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"td\");\n    i0.ɵɵtext(10);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(11, \"td\");\n    i0.ɵɵtext(12);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(13, \"td\")(14, \"button\", 10);\n    i0.ɵɵlistener(\"click\", function UrgenciasComponent_tr_35_Template_button_click_14_listener() {\n      var restoredCtx = i0.ɵɵrestoreView(_r3);\n      var urgencia_r1 = restoredCtx.$implicit;\n      var ctx_r2 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r2.confirmDelete(urgencia_r1.idPaciente));\n    });\n    i0.ɵɵtext(15);\n    i0.ɵɵpipe(16, \"translate\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(17, \"td\")(18, \"button\", 11);\n    i0.ɵɵlistener(\"click\", function UrgenciasComponent_tr_35_Template_button_click_18_listener() {\n      var restoredCtx = i0.ɵɵrestoreView(_r3);\n      var urgencia_r1 = restoredCtx.$implicit;\n      var ctx_r4 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r4.confirmFacturar(urgencia_r1.idPaciente));\n    });\n    i0.ɵɵtext(19);\n    i0.ɵɵpipe(20, \"translate\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(21, \"td\")(22, \"button\", 12);\n    i0.ɵɵlistener(\"click\", function UrgenciasComponent_tr_35_Template_button_click_22_listener() {\n      var restoredCtx = i0.ɵɵrestoreView(_r3);\n      var urgencia_r1 = restoredCtx.$implicit;\n      var ctx_r5 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r5.operar(urgencia_r1));\n    });\n    i0.ɵɵtext(23);\n    i0.ɵɵpipe(24, \"translate\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(25, \"td\")(26, \"button\", 12);\n    i0.ɵɵlistener(\"click\", function UrgenciasComponent_tr_35_Template_button_click_26_listener() {\n      var restoredCtx = i0.ɵɵrestoreView(_r3);\n      var urgencia_r1 = restoredCtx.$implicit;\n      var ctx_r6 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r6.hospitalizar(urgencia_r1));\n    });\n    i0.ɵɵtext(27);\n    i0.ɵɵpipe(28, \"translate\");\n    i0.ɵɵelementEnd()()();\n  }\n\n  if (rf & 2) {\n    var urgencia_r1 = ctx.$implicit;\n    var ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(urgencia_r1.idPaciente);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(urgencia_r1.nombrePersona);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(urgencia_r1.fechaIngreso);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(urgencia_r1.eps);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(ctx_r0.cambiar(urgencia_r1.fechaHospitalizacion));\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(ctx_r0.cambiar(urgencia_r1.fechaCirugia));\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(16, 12, \"forms.delete\"));\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(20, 14, \"forms.facturar\"));\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"disabled\", urgencia_r1.fechaCirugia);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(24, 16, \"forms.operar\"));\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"disabled\", urgencia_r1.fechaHospitalizacion);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(28, 18, \"forms.hospitalizar\"));\n  }\n}\n\nexport var UrgenciasComponent = /*#__PURE__*/(function () {\n  var UrgenciasComponent = /*#__PURE__*/function () {\n    function UrgenciasComponent(service, translate, router) {\n      _classCallCheck(this, UrgenciasComponent);\n\n      this.service = service;\n      this.translate = translate;\n      this.router = router;\n      this.urgencias = [];\n      this.page = 1;\n      this.pageSize = 4;\n      this.collectionSize = this.urgencias.length;\n    }\n\n    _createClass(UrgenciasComponent, [{\n      key: \"ngOnInit\",\n      value: function ngOnInit() {\n        this.getUrgencias();\n      }\n    }, {\n      key: \"getUrgencias\",\n      value: function getUrgencias() {\n        var _this = this;\n\n        var url = \"/api/urgencias/obtener-urgencias\";\n        this.service.queryExternalApi(url).subscribe(function (response) {\n          var result = response.json();\n\n          if (result) {\n            _this.urgencias = result;\n          } else {\n            console.log('error');\n          }\n        }, function (err) {\n          console.log(err);\n        });\n      }\n    }, {\n      key: \"operar\",\n      value: function operar(urgencia) {\n        urgencia.fechaCirugia = new Date();\n        this.actualizar(urgencia, \"alerts.registrar_operacion\");\n      }\n    }, {\n      key: \"hospitalizar\",\n      value: function hospitalizar(urgencia) {\n        urgencia.fechaHospitalizacion = new Date();\n        this.actualizar(urgencia, \"alerts.registrar_hospitalizacion\");\n      }\n    }, {\n      key: \"actualizar\",\n      value: function actualizar(urgencia, alerta) {\n        var _this2 = this;\n\n        var url = \"/api/urgencias/agregar-urgencia\";\n        var data = {\n          \"eps\": urgencia.eps,\n          \"fechaHospitalizacion\": urgencia.fechaHospitalizacion,\n          \"fechaIngreso\": urgencia.fechaIngreso,\n          \"idPaciente\": urgencia.idPaciente,\n          \"nombrePersona\": urgencia.nombrePersona,\n          \"fechaCirugia\": urgencia.fechaCirugia\n        };\n        var body = JSON.stringify(data);\n        this.service.queryPost(url, body).subscribe(function (data) {\n          var result = data;\n\n          if (result) {\n            swal({\n              title: _this2.translate.instant(\"alerts.success\"),\n              text: _this2.translate.instant(alerta),\n              type: \"success\",\n              showCancelButton: false,\n              confirmButtonColor: \"#3085d6\",\n              cancelButtonColor: \"#d33\",\n              confirmButtonText: _this2.translate.instant(\"buttons.ok\")\n            }).then(function (result) {\n              _this2.getUrgencias();\n            });\n          } else {\n            swal({\n              title: _this2.translate.instant(\"alerts.error\"),\n              text: _this2.translate.instant(\"alerts.cannot_delete_urgencia\"),\n              type: \"error\",\n              showCancelButton: false,\n              confirmButtonColor: \"#3085d6\",\n              cancelButtonColor: \"#d33\",\n              confirmButtonText: _this2.translate.instant(\"buttons.ok\")\n            }).then(function (result) {\n              return false;\n            });\n          }\n        }, function (err) {\n          console.log(err);\n        });\n      }\n    }, {\n      key: \"cambiar\",\n      value: function cambiar(valor) {\n        var cadena;\n\n        if (valor !== null) {\n          cadena = \"Si\";\n        } else {\n          cadena = \"No\";\n        }\n\n        return cadena;\n      }\n    }, {\n      key: \"confirmDelete\",\n      value: function confirmDelete(idPaciente) {\n        var _this3 = this;\n\n        swal({\n          title: this.translate.instant(\"alerts.confirm\"),\n          text: this.translate.instant(\"alerts.sure_to_delete\"),\n          type: \"warning\",\n          showCancelButton: true,\n          confirmButtonColor: \"#3085d6\",\n          cancelButtonColor: \"#d33\",\n          confirmButtonText: this.translate.instant(\"buttons.yes\"),\n          cancelButtonText: this.translate.instant(\"buttons.cancel\")\n        }).then(function (result) {\n          if (result.value) {\n            _this3.eliminarUrgencia(idPaciente);\n          }\n        });\n      }\n    }, {\n      key: \"eliminarUrgencia\",\n      value: function eliminarUrgencia(idPaciente) {\n        var _this4 = this;\n\n        var url = \"/api/urgencias/eliminar-urgencia/\".concat(idPaciente);\n        this.service.queryDeleteRegular(url).subscribe(function (response) {\n          var result = response;\n\n          if (result) {\n            _this4.getUrgencias();\n\n            swal({\n              title: _this4.translate.instant(\"alerts.success\"),\n              text: _this4.translate.instant(\"alerts.deleted_urgencia\"),\n              type: \"success\",\n              showCancelButton: false,\n              confirmButtonColor: \"#3085d6\",\n              cancelButtonColor: \"#d33\",\n              confirmButtonText: _this4.translate.instant(\"buttons.ok\")\n            }).then(function (result) {\n              return false;\n            });\n          } else {\n            swal({\n              title: _this4.translate.instant(\"alerts.error\"),\n              text: _this4.translate.instant(\"alerts.urgencia_doesnt_exist\"),\n              type: \"error\",\n              showCancelButton: false,\n              confirmButtonColor: \"#3085d6\",\n              cancelButtonColor: \"#d33\",\n              confirmButtonText: _this4.translate.instant(\"buttons.ok\")\n            }).then(function (result) {\n              return false;\n            });\n          }\n        }, function (err) {\n          console.log(err);\n        });\n      }\n    }, {\n      key: \"confirmFacturar\",\n      value: function confirmFacturar(idPaciente) {\n        var _this5 = this;\n\n        swal({\n          title: this.translate.instant(\"alerts.confirm\"),\n          text: this.translate.instant(\"alerts.sure_to_facturar\"),\n          type: \"warning\",\n          showCancelButton: true,\n          confirmButtonColor: \"#3085d6\",\n          cancelButtonColor: \"#d33\",\n          confirmButtonText: this.translate.instant(\"buttons.yes\"),\n          cancelButtonText: this.translate.instant(\"buttons.cancel\")\n        }).then(function (result) {\n          if (result.value) {\n            _this5.router.navigate([\"/factura/\" + idPaciente]);\n          }\n        });\n      }\n    }]);\n\n    return UrgenciasComponent;\n  }();\n\n  UrgenciasComponent.ɵfac = function UrgenciasComponent_Factory(t) {\n    return new (t || UrgenciasComponent)(i0.ɵɵdirectiveInject(i1.RestService), i0.ɵɵdirectiveInject(i2.TranslateService), i0.ɵɵdirectiveInject(i3.Router));\n  };\n\n  UrgenciasComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: UrgenciasComponent,\n    selectors: [[\"app-urgencias\"]],\n    decls: 36,\n    vars: 25,\n    consts: [[1, \"spacer20\"], [1, \"container\"], [1, \"page-header\"], [1, \"row\"], [1, \"col-md-10\"], [1, \"col-md-2\"], [\"id\", \"crearUrgencia\", \"routerLink\", \"/urgencia-form\", 1, \"btn\", \"btn-primary\", \"pull-right\"], [1, \"table\", \"table-striped\"], [\"scope\", \"col\"], [4, \"ngFor\", \"ngForOf\"], [\"id\", \"botonEliminar\", 1, \"btn\", \"btn-danger\", 3, \"click\"], [\"id\", \"botonFacturar\", 1, \"btn\", \"btn-success\", 3, \"click\"], [1, \"btn\", \"btn-success\", 3, \"disabled\", \"click\"]],\n    template: function UrgenciasComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelement(0, \"div\", 0);\n        i0.ɵɵelementStart(1, \"div\", 1)(2, \"div\", 2)(3, \"div\", 3)(4, \"div\", 4)(5, \"h1\");\n        i0.ɵɵtext(6);\n        i0.ɵɵpipe(7, \"translate\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(8, \"div\", 5)(9, \"button\", 6);\n        i0.ɵɵtext(10);\n        i0.ɵɵpipe(11, \"translate\");\n        i0.ɵɵelementEnd()()()();\n        i0.ɵɵelementStart(12, \"table\", 7)(13, \"thead\")(14, \"tr\")(15, \"th\", 8);\n        i0.ɵɵtext(16);\n        i0.ɵɵpipe(17, \"translate\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(18, \"th\", 8);\n        i0.ɵɵtext(19);\n        i0.ɵɵpipe(20, \"translate\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(21, \"th\", 8);\n        i0.ɵɵtext(22);\n        i0.ɵɵpipe(23, \"translate\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(24, \"th\", 8);\n        i0.ɵɵtext(25);\n        i0.ɵɵpipe(26, \"translate\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(27, \"th\", 8);\n        i0.ɵɵtext(28);\n        i0.ɵɵpipe(29, \"translate\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(30, \"th\", 8);\n        i0.ɵɵtext(31);\n        i0.ɵɵpipe(32, \"translate\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(33, \"th\", 8);\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(34, \"tbody\");\n        i0.ɵɵtemplate(35, UrgenciasComponent_tr_35_Template, 29, 20, \"tr\", 9);\n        i0.ɵɵelementEnd()()();\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(6);\n        i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(7, 9, \"forms.available_urgencias\"));\n        i0.ɵɵadvance(4);\n        i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind1(11, 11, \"forms.new\"), \" \");\n        i0.ɵɵadvance(6);\n        i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(17, 13, \"forms.isbn\"));\n        i0.ɵɵadvance(3);\n        i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(20, 15, \"forms.name\"));\n        i0.ɵɵadvance(3);\n        i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(23, 17, \"forms.inventory\"));\n        i0.ɵɵadvance(3);\n        i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(26, 19, \"forms.eps\"));\n        i0.ɵɵadvance(3);\n        i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(29, 21, \"forms.available\"));\n        i0.ɵɵadvance(3);\n        i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(32, 23, \"forms.esCirugia\"));\n        i0.ɵɵadvance(4);\n        i0.ɵɵproperty(\"ngForOf\", ctx.urgencias);\n      }\n    }\n  });\n  return UrgenciasComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}