{"ast":null,"code":"import _classCallCheck from \"C:/Repo prueba KONEX/repo-prueba-konex/konex-cliente/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"C:/Repo prueba KONEX/repo-prueba-konex/konex-cliente/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport { TranslateService } from \"@ngx-translate/core\";\nimport { Router, ActivatedRoute } from \"@angular/router\";\nimport { FormGroup, FormControl, Validators } from \"@angular/forms\";\nimport { RestService } from 'src/app/core/services/rest.service';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@ngx-translate/core\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"src/app/core/services/rest.service\";\nimport * as i4 from \"@angular/common\";\nimport * as i5 from \"@angular/forms\";\n\nfunction CrearUrgenciasComponent_h1_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"h1\");\n    i0.ɵɵtext(1);\n    i0.ɵɵpipe(2, \"translate\");\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind1(2, 1, \"forms.create_urgencia\"), \" \");\n  }\n}\n\nfunction CrearUrgenciasComponent_h1_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"h1\");\n    i0.ɵɵtext(1);\n    i0.ɵɵpipe(2, \"translate\");\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind1(2, 1, \"forms.edit_urgencia\"), \" \");\n  }\n}\n\nfunction CrearUrgenciasComponent_span_10_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\")(1, \"strong\");\n    i0.ɵɵtext(2);\n    i0.ɵɵpipe(3, \"translate\");\n    i0.ɵɵelementEnd()();\n  }\n\n  if (rf & 2) {\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(3, 1, \"validation.required_field\"));\n  }\n}\n\nfunction CrearUrgenciasComponent_span_16_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\")(1, \"strong\");\n    i0.ɵɵtext(2);\n    i0.ɵɵpipe(3, \"translate\");\n    i0.ɵɵelementEnd()();\n  }\n\n  if (rf & 2) {\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(3, 1, \"validation.required_field\"));\n  }\n}\n\nfunction CrearUrgenciasComponent_span_22_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\")(1, \"strong\");\n    i0.ɵɵtext(2);\n    i0.ɵɵpipe(3, \"translate\");\n    i0.ɵɵelementEnd()();\n  }\n\n  if (rf & 2) {\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(3, 1, \"validation.required_field\"));\n  }\n}\n\nfunction CrearUrgenciasComponent_span_28_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\")(1, \"strong\");\n    i0.ɵɵtext(2);\n    i0.ɵɵpipe(3, \"translate\");\n    i0.ɵɵelementEnd()();\n  }\n\n  if (rf & 2) {\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(3, 1, \"validation.required_field\"));\n  }\n}\n\nexport var CrearUrgenciasComponent = /*#__PURE__*/(function () {\n  var CrearUrgenciasComponent = /*#__PURE__*/function () {\n    function CrearUrgenciasComponent(translate, router, service, route) {\n      _classCallCheck(this, CrearUrgenciasComponent);\n\n      this.translate = translate;\n      this.router = router;\n      this.service = service;\n      this.route = route;\n      this.editing = false;\n      this.identificacion = null;\n      this.eps = null;\n      this.nombrePaciente = null;\n      this.fechaIngreso = null;\n    }\n\n    _createClass(CrearUrgenciasComponent, [{\n      key: \"ngOnInit\",\n      value: function ngOnInit() {\n        this.identificacion = this.route.snapshot.queryParams[\"identificacion\"];\n        this.nombrePaciente = this.route.snapshot.queryParams[\"nombrePaciente\"];\n        this.fechaIngreso = this.route.snapshot.queryParams[\"fechaIngreso\"];\n        this.eps = this.route.snapshot.queryParams[\"eps\"];\n        this.myForm = new FormGroup({\n          identificacion: new FormControl(\"identificacion\", [Validators.required]),\n          nombrePaciente: new FormControl(\"nombrePaciente\", [Validators.required]),\n          fechaIngreso: new FormControl(\"fechaIngreso\", [Validators.required]),\n          eps: new FormControl(\"eps\", [Validators.required])\n        });\n\n        if (null !== this.identificacion && undefined !== this.identificacion) {\n          this.myForm.controls[\"identificacion\"].setValue(this.identificacion);\n          this.editing = true;\n        }\n\n        this.myForm.controls[\"nombrePaciente\"].setValue(\"\");\n        this.myForm.controls[\"eps\"].setValue(\"\");\n\n        if (null !== this.fechaIngreso && undefined !== this.fechaIngreso) {\n          this.myForm.controls[\"fechaIngreso\"].setValue(this.fechaIngreso);\n        }\n      }\n      /**\r\n       *\r\n       */\n\n    }, {\n      key: \"store\",\n      value: function store() {\n        var _this = this;\n\n        var controls = this.myForm.controls;\n\n        if (this.myForm.invalid) {\n          Object.keys(controls).forEach(function (controlName) {\n            return controls[controlName].markAsTouched();\n          });\n          return;\n        }\n\n        var datosUrgencia = {\n          identificacion: controls[\"identificacion\"].value,\n          nombrePaciente: controls[\"nombrePaciente\"].value,\n          fechaIngreso: controls[\"fechaIngreso\"].value,\n          eps: controls[\"eps\"].value\n        };\n        var url = \"/api/urgencias/agregar-urgencia\";\n        var data = {\n          \"eps\": datosUrgencia.eps,\n          \"fechaIngreso\": datosUrgencia.fechaIngreso,\n          \"idPaciente\": datosUrgencia.identificacion,\n          \"nombrePersona\": datosUrgencia.nombrePaciente\n        };\n        var body = JSON.stringify(data);\n        this.service.queryPost(url, body).subscribe(function (data) {\n          var result = data;\n\n          if (result) {\n            swal({\n              title: _this.translate.instant(\"alerts.success\"),\n              text: _this.translate.instant(\"alerts.stored_urgencia\"),\n              type: \"success\",\n              showCancelButton: false,\n              confirmButtonColor: \"#3085d6\",\n              cancelButtonColor: \"#d33\",\n              confirmButtonText: _this.translate.instant(\"buttons.ok\")\n            }).then(function (result) {\n              _this.router.navigate([\"/urgencias\"]);\n            });\n          } else {\n            swal({\n              title: _this.translate.instant(\"alerts.error\"),\n              text: _this.translate.instant(\"alerts.cannot_delete_urgencia\"),\n              type: \"error\",\n              showCancelButton: false,\n              confirmButtonColor: \"#3085d6\",\n              cancelButtonColor: \"#d33\",\n              confirmButtonText: _this.translate.instant(\"buttons.ok\")\n            });\n          }\n        }, function (err) {\n          console.log(err);\n        });\n      }\n    }, {\n      key: \"confirmVolver\",\n      value: function confirmVolver(idPaciente) {\n        swal({\n          title: this.translate.instant(\"alerts.confirm\"),\n          text: this.translate.instant(\"alerts.sure_to_volver\"),\n          type: \"warning\",\n          showCancelButton: true,\n          confirmButtonColor: \"#3085d6\",\n          cancelButtonColor: \"#d33\",\n          confirmButtonText: this.translate.instant(\"buttons.yes\"),\n          cancelButtonText: this.translate.instant(\"buttons.cancel\")\n        });\n      }\n      /**\r\n       * Validates whether a field follows the validation rules\r\n       *\r\n       * @param controlName name of the control being evaluated\r\n       * @param validationType type of the validation to be evaluated\r\n       */\n\n    }, {\n      key: \"controlHasError\",\n      value: function controlHasError(controlName, validationType) {\n        var control = this.myForm.controls[controlName];\n\n        if (!control) {\n          return false;\n        }\n\n        var result = control.hasError(validationType) && (control.dirty || control.touched);\n        return result;\n      }\n    }]);\n\n    return CrearUrgenciasComponent;\n  }();\n\n  CrearUrgenciasComponent.ɵfac = function CrearUrgenciasComponent_Factory(t) {\n    return new (t || CrearUrgenciasComponent)(i0.ɵɵdirectiveInject(i1.TranslateService), i0.ɵɵdirectiveInject(i2.Router), i0.ɵɵdirectiveInject(i3.RestService), i0.ɵɵdirectiveInject(i2.ActivatedRoute));\n  };\n\n  CrearUrgenciasComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: CrearUrgenciasComponent,\n    selectors: [[\"app-create-urgencias\"]],\n    decls: 36,\n    vars: 25,\n    consts: [[1, \"create-container\"], [4, \"ngIf\"], [1, \"form\"], [3, \"formGroup\"], [1, \"form-group\"], [\"id\", \"identificacion\", \"type\", \"number\", \"formControlName\", \"identificacion\", 1, \"form-control\"], [\"id\", \"nombrePaciente\", \"type\", \"text\", \"formControlName\", \"nombrePaciente\", 1, \"form-control\"], [\"id\", \"fechaIngreso\", \"type\", \"date\", \"formControlName\", \"fechaIngreso\", 1, \"form-control\"], [\"id\", \"eps\", \"type\", \"text\", \"formControlName\", \"eps\", 1, \"form-control\"], [\"id\", \"botonCrearUrgencia\", 1, \"btn\", \"btn-primary\", 3, \"click\"], [\"id\", \"botonVolver\", 1, \"btn\", \"btn-primary\", 3, \"click\"]],\n    template: function CrearUrgenciasComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0);\n        i0.ɵɵtemplate(1, CrearUrgenciasComponent_h1_1_Template, 3, 3, \"h1\", 1);\n        i0.ɵɵtemplate(2, CrearUrgenciasComponent_h1_2_Template, 3, 3, \"h1\", 1);\n        i0.ɵɵelementStart(3, \"div\", 2)(4, \"form\", 3)(5, \"div\", 4)(6, \"label\");\n        i0.ɵɵtext(7);\n        i0.ɵɵpipe(8, \"translate\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(9, \"input\", 5);\n        i0.ɵɵtemplate(10, CrearUrgenciasComponent_span_10_Template, 4, 3, \"span\", 1);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(11, \"div\", 4)(12, \"label\");\n        i0.ɵɵtext(13);\n        i0.ɵɵpipe(14, \"translate\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(15, \"input\", 6);\n        i0.ɵɵtemplate(16, CrearUrgenciasComponent_span_16_Template, 4, 3, \"span\", 1);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(17, \"div\", 4)(18, \"label\");\n        i0.ɵɵtext(19);\n        i0.ɵɵpipe(20, \"translate\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(21, \"input\", 7);\n        i0.ɵɵtemplate(22, CrearUrgenciasComponent_span_22_Template, 4, 3, \"span\", 1);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(23, \"div\", 4)(24, \"label\");\n        i0.ɵɵtext(25);\n        i0.ɵɵpipe(26, \"translate\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(27, \"input\", 8);\n        i0.ɵɵtemplate(28, CrearUrgenciasComponent_span_28_Template, 4, 3, \"span\", 1);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(29, \"button\", 9);\n        i0.ɵɵlistener(\"click\", function CrearUrgenciasComponent_Template_button_click_29_listener() {\n          return ctx.store();\n        });\n        i0.ɵɵtext(30);\n        i0.ɵɵpipe(31, \"translate\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(32, \"p\");\n        i0.ɵɵelementStart(33, \"button\", 10);\n        i0.ɵɵlistener(\"click\", function CrearUrgenciasComponent_Template_button_click_33_listener() {\n          return ctx.confirmVolver();\n        });\n        i0.ɵɵtext(34);\n        i0.ɵɵpipe(35, \"translate\");\n        i0.ɵɵelementEnd()()()();\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", !ctx.editing);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.editing);\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"formGroup\", ctx.myForm);\n        i0.ɵɵadvance(3);\n        i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(8, 13, \"forms.isbn\"));\n        i0.ɵɵadvance(3);\n        i0.ɵɵproperty(\"ngIf\", ctx.controlHasError(\"identificacion\", \"required\"));\n        i0.ɵɵadvance(3);\n        i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(14, 15, \"forms.name\"));\n        i0.ɵɵadvance(3);\n        i0.ɵɵproperty(\"ngIf\", ctx.controlHasError(\"nombrePaciente\", \"required\"));\n        i0.ɵɵadvance(3);\n        i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(20, 17, \"forms.inventory\"));\n        i0.ɵɵadvance(3);\n        i0.ɵɵproperty(\"ngIf\", ctx.controlHasError(\"fechaIngreso\", \"required\"));\n        i0.ɵɵadvance(3);\n        i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(26, 19, \"forms.eps\"));\n        i0.ɵɵadvance(3);\n        i0.ɵɵproperty(\"ngIf\", ctx.controlHasError(\"eps\", \"required\"));\n        i0.ɵɵadvance(2);\n        i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind1(31, 21, \"forms.save\"), \" \");\n        i0.ɵɵadvance(4);\n        i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind1(35, 23, \"forms.return\"), \" \");\n      }\n    },\n    dependencies: [i4.NgIf, i5.ɵNgNoValidate, i5.DefaultValueAccessor, i5.NumberValueAccessor, i5.NgControlStatus, i5.NgControlStatusGroup, i5.FormGroupDirective, i5.FormControlName, i1.TranslatePipe]\n  });\n  return CrearUrgenciasComponent;\n})();\n\nfunction swal(arg0) {\n  throw new Error(\"Function not implemented.\");\n}","map":null,"metadata":{},"sourceType":"module"}