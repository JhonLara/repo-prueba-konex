{"ast":null,"code":"import _classCallCheck from \"C:/Repo prueba KONEX/repo-prueba-konex/konex-cliente/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"C:/Repo prueba KONEX/repo-prueba-konex/konex-cliente/node_modules/@babel/runtime/helpers/esm/createClass.js\";\n\nvar _a;\n\nimport { __decorate, __metadata } from \"tslib\";\nimport { Component } from '@angular/core';\nimport swal from \"sweetalert2\";\nimport { TranslateService } from '@ngx-translate/core';\nimport { Router } from '@angular/router';\nimport { RestService } from 'src/app/core/services/rest.service';\n\nvar UrgenciasComponent = /*#__PURE__*/function () {\n  function UrgenciasComponent(service, translate, router) {\n    _classCallCheck(this, UrgenciasComponent);\n\n    this.service = service;\n    this.translate = translate;\n    this.router = router;\n    this.urgencias = [];\n    this.page = 1;\n    this.pageSize = 4;\n    this.collectionSize = this.urgencias.length;\n  }\n\n  _createClass(UrgenciasComponent, [{\n    key: \"ngOnInit\",\n    value: function ngOnInit() {\n      this.getUrgencias();\n    }\n  }, {\n    key: \"getUrgencias\",\n    value: function getUrgencias() {\n      var _this = this;\n\n      var url = \"/api/urgencias/obtener-urgencias\";\n      this.service.queryExternalApi(url).subscribe(function (response) {\n        var result = response.json();\n\n        if (result) {\n          _this.urgencias = result;\n        } else {\n          console.log('error');\n        }\n      }, function (err) {\n        console.log(err);\n      });\n    }\n  }, {\n    key: \"operar\",\n    value: function operar(urgencia) {\n      urgencia.fechaCirugia = new Date();\n      this.actualizar(urgencia, \"alerts.registrar_operacion\");\n    }\n  }, {\n    key: \"hospitalizar\",\n    value: function hospitalizar(urgencia) {\n      urgencia.fechaHospitalizacion = new Date();\n      this.actualizar(urgencia, \"alerts.registrar_hospitalizacion\");\n    }\n  }, {\n    key: \"actualizar\",\n    value: function actualizar(urgencia, alerta) {\n      var _this2 = this;\n\n      var url = \"/api/urgencias/agregar-urgencia\";\n      var data = {\n        \"eps\": urgencia.eps,\n        \"fechaHospitalizacion\": urgencia.fechaHospitalizacion,\n        \"fechaIngreso\": urgencia.fechaIngreso,\n        \"idPaciente\": urgencia.idPaciente,\n        \"nombrePersona\": urgencia.nombrePersona,\n        \"fechaCirugia\": urgencia.fechaCirugia\n      };\n      var body = JSON.stringify(data);\n      this.service.queryPost(url, body).subscribe(function (data) {\n        var result = data;\n\n        if (result) {\n          swal({\n            title: _this2.translate.instant(\"alerts.success\"),\n            text: _this2.translate.instant(alerta),\n            type: \"success\",\n            showCancelButton: false,\n            confirmButtonColor: \"#3085d6\",\n            cancelButtonColor: \"#d33\",\n            confirmButtonText: _this2.translate.instant(\"buttons.ok\")\n          }).then(function (result) {\n            _this2.getUrgencias();\n          });\n        } else {\n          swal({\n            title: _this2.translate.instant(\"alerts.error\"),\n            text: _this2.translate.instant(\"alerts.cannot_delete_urgencia\"),\n            type: \"error\",\n            showCancelButton: false,\n            confirmButtonColor: \"#3085d6\",\n            cancelButtonColor: \"#d33\",\n            confirmButtonText: _this2.translate.instant(\"buttons.ok\")\n          }).then(function (result) {\n            return false;\n          });\n        }\n      }, function (err) {\n        console.log(err);\n      });\n    }\n  }, {\n    key: \"cambiar\",\n    value: function cambiar(valor) {\n      var cadena;\n\n      if (valor !== null) {\n        cadena = \"Si\";\n      } else {\n        cadena = \"No\";\n      }\n\n      return cadena;\n    }\n  }, {\n    key: \"confirmDelete\",\n    value: function confirmDelete(idPaciente) {\n      var _this3 = this;\n\n      swal({\n        title: this.translate.instant(\"alerts.confirm\"),\n        text: this.translate.instant(\"alerts.sure_to_delete\"),\n        type: \"warning\",\n        showCancelButton: true,\n        confirmButtonColor: \"#3085d6\",\n        cancelButtonColor: \"#d33\",\n        confirmButtonText: this.translate.instant(\"buttons.yes\"),\n        cancelButtonText: this.translate.instant(\"buttons.cancel\")\n      }).then(function (result) {\n        if (result.value) {\n          _this3.eliminarUrgencia(idPaciente);\n        }\n      });\n    }\n  }, {\n    key: \"eliminarUrgencia\",\n    value: function eliminarUrgencia(idPaciente) {\n      var _this4 = this;\n\n      var url = \"/api/urgencias/eliminar-urgencia/\".concat(idPaciente);\n      this.service.queryDeleteRegular(url).subscribe(function (response) {\n        var result = response;\n\n        if (result) {\n          _this4.getUrgencias();\n\n          swal({\n            title: _this4.translate.instant(\"alerts.success\"),\n            text: _this4.translate.instant(\"alerts.deleted_urgencia\"),\n            type: \"success\",\n            showCancelButton: false,\n            confirmButtonColor: \"#3085d6\",\n            cancelButtonColor: \"#d33\",\n            confirmButtonText: _this4.translate.instant(\"buttons.ok\")\n          }).then(function (result) {\n            return false;\n          });\n        } else {\n          swal({\n            title: _this4.translate.instant(\"alerts.error\"),\n            text: _this4.translate.instant(\"alerts.urgencia_doesnt_exist\"),\n            type: \"error\",\n            showCancelButton: false,\n            confirmButtonColor: \"#3085d6\",\n            cancelButtonColor: \"#d33\",\n            confirmButtonText: _this4.translate.instant(\"buttons.ok\")\n          }).then(function (result) {\n            return false;\n          });\n        }\n      }, function (err) {\n        console.log(err);\n      });\n    }\n  }, {\n    key: \"confirmFacturar\",\n    value: function confirmFacturar(idPaciente) {\n      var _this5 = this;\n\n      swal({\n        title: this.translate.instant(\"alerts.confirm\"),\n        text: this.translate.instant(\"alerts.sure_to_facturar\"),\n        type: \"warning\",\n        showCancelButton: true,\n        confirmButtonColor: \"#3085d6\",\n        cancelButtonColor: \"#d33\",\n        confirmButtonText: this.translate.instant(\"buttons.yes\"),\n        cancelButtonText: this.translate.instant(\"buttons.cancel\")\n      }).then(function (result) {\n        if (result.value) {\n          _this5.router.navigate([\"/factura/\" + idPaciente]);\n        }\n      });\n    }\n  }]);\n\n  return UrgenciasComponent;\n}();\n\nUrgenciasComponent = __decorate([Component({\n  selector: 'app-urgencias',\n  templateUrl: './urgencias.component.html',\n  styleUrls: ['./urgencias.component.scss']\n}), __metadata(\"design:paramtypes\", [RestService, typeof (_a = typeof TranslateService !== \"undefined\" && TranslateService) === \"function\" ? _a : Object, Router])], UrgenciasComponent);\nexport { UrgenciasComponent };","map":null,"metadata":{},"sourceType":"module"}